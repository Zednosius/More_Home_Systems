#Added Zed
namespace = mhs

event = {
    id = mhs.1
    hide_window = yes
    is_triggered_only = yes

    immediate = {
		IF = {
			limit = {
				any_country = {
					is_country_type = default
					capital_scope = {
						solar_system = {
							has_star_flag = ikor_system
						}
					}
				}
			}
			random_country = {
				limit = {
					is_country_type = default
					capital_scope = {
						solar_system = {
							has_star_flag = ikor_system
						}
					}
				}
				save_event_target_as = mhs_ikor_owner
			}
			every_country = {
				limit = {
					NOT = {
						is_country_type = default
					}
					capital_scope = {
						solar_system = {
							has_star_flag = ikor_system
						}
					}
				}
				establish_communications = event_target:mhs_ikor_owner
			}
		}

        every_planet = {
            limit = {
                has_planet_flag = not_ideal_planet
            }
            # Go to the system scope and get the space owner
            # Since the planet is not directly owned we can't use owner = {}
            solar_system = {
                space_owner = {
                    save_event_target_as = target_country
                }
            }
            #Run the scripted effect
            #change_planet_to_not_preferred = yes
            planet_event = { id = mhs.2 }
        }
    }
}

planet_event = {
    id = mhs.2
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        change_planet_to_not_preferred = yes
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
		random_list = {
			35 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_dangerous_wildlife"
				}
			}
			30 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_mountain_range"
				}
			}
			25 = {
				random_tile = {
					limit = { has_blocker = no has_building = no }
					set_blocker = "tb_active_volcano"
				}
			}
			10 = {}
		}
    }
}

event = {
    id = mhs.3
    hide_window = yes
    is_triggered_only = yes

    immediate = {

        random_planet = {
            limit = {
                has_planet_flag = mhs_reiir
            }
			planet_event = { id = mhs.4 }
        }
    }
}

planet_event = {
    id = mhs.4
    hide_window = yes
    is_triggered_only = yes

    immediate = {
		change_pc = pc_ringworld_habitable
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"		
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"			
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"		
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_decrepit_dwellings"				
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_decrepit_dwellings"				
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"
		}	
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"
		}	
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_decrepit_dwellings"				
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_failing_infrastructure"
		}
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_decrepit_dwellings"
		}			
		random_tile = {
			limit = { has_blocker = no has_building = no has_pop = no }
			set_blocker = "tb_decrepit_dwellings"		
		}
	}
}